<div ng-controller="FileController" data-ng-init="getFiles()">
   <button id="authorize-button" style="visibility: hidden">Authorize</button>
    <script type="text/javascript">
      // Enter a client ID for a web application from the Google Developer Console.
      // The provided clientId will only work if the sample is run directly from
      // https://google-api-javascript-client.googlecode.com/hg/samples/authSample.html
      // In your Developer Console project, add a JavaScript origin that corresponds to the domain
      // where you will be running the script.
      var clientId = '242925103834-62p0i78fsoote0nkhpn6lfjpau0ljt2v.apps.googleusercontent.com';

      // Enter the API key from the Google Develoepr Console - to handle any unauthenticated
      // requests in the code.
      // The provided key works for this sample only when run from
      // https://google-api-javascript-client.googlecode.com/hg/samples/authSample.html
      // To use in your own application, replace this API key with your own.
      var apiKey = 'AIzaSyACyKO5dH-2eU_QZj5CTPv57CqvstqBXmE';

      // To enter one or more authentication scopes, refer to the documentation for the API.
      var scopes = "https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/devstorage.full_control";

      // Use a button to handle authentication the first time.
      function handleClientLoad() {
      	console.log("IN HOME");
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
      }

      function checkAuth() {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
      }


      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function handleAuthClick(event) {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }
     function makeApiCall() {
        gapi.client.load('plus', 'v1', function() {
          var request = gapi.client.plus.people.get({
            'userId': 'me'
          });
          request.execute(function(resp) {
            var heading = document.createElement('h4');
            var image = document.createElement('img');
            image.src = resp.image.url;
            heading.appendChild(image);
            heading.appendChild(document.createTextNode(resp.displayName));

            document.getElementById('content').appendChild(heading);
          });
        });
    }
      </script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>


	<div class="jumbotron text-center">
		<h1>Home Page</h1>

		<p>{{ tagline }}</p>
	</div>

	<h1>bucket: {{bucket}}</h1>

	<!-- {{getPlus()}} -->


	<div class="file-list" ng-repeat="file in allfiles track by $index">
		<!-- <button class="btn-xs btn-info" ng-click="editFile(file)">Edit</button> -->
		<!-- <button class="btn-xs btn-danger" ng-click="deleteFile(file)">Delete</button><br> -->
		<!-- {{file.name}}<br> -->
		{{file}}
	    --------------------------------------------- <br>
	</div>



	<form method="post" enctype="multipart/form-data" action="/api/upload">
		<input type="hidden" name="_csrf">		
	    <input type="file" name="file" data-ng-model="file">
	    <input type="submit" value="Upload">
	</form>
		<!-- <button class="btn-xs btn-info" ng-click="deleteFile(file, {{bucket}})">Delete</button> -->

</div>